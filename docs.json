{"swagger":"2.0","info":{"description":"Rest API for DeployHandler project.","version":"1.0.0","title":"DeployHandler.js API","contact":{"email":"alekski64@icloud.com","url":"https://aleksandar.alfa-ing.com"},"license":{"name":"Apache 2.0","url":"http://www.apache.org/licenses/LICENSE-2.0.html"}},"tags":[{"name":"users","description":"Operations related to user registration and login."},{"name":"apps","description":"Operations related to users applications."}],"paths":{"/users":{"post":{"tags":["users"],"summary":"Register an user.","produces":["application/json"],"consumes":["application/x-www-form-urlencoded"],"parameters":[{"in":"formData","name":"username","description":"Username for new account.","required":true,"type":"string"},{"in":"formData","name":"password","description":"Password for new account.","required":true,"type":"string"},{"in":"formData","name":"email","description":"E-mail for new account.","required":true,"type":"string"}],"responses":{"201":{"description":"New user object in response.","schema":{"$ref":"#/definitions/UserObject"}},"500":{"description":"Error while registrating user."}}}},"/users/login":{"post":{"tags":["users"],"summary":"Login user - get token.","produces":["application/json"],"consumes":["application/x-www-form-urlencoded"],"parameters":[{"in":"formData","name":"username","description":"Username for user to authenticate.","required":true,"type":"string"},{"in":"formData","name":"password","description":"Password for user to authenticate.","required":true,"type":"string"}],"responses":{"200":{"description":"User is logged in.Token and user id in response.","schema":{"$ref":"#/definitions/LoginObject"}},"401":{"description":"Invalid login credentials."},"500":{"description":"An error occurred while logging in."}}}},"/apps":{"get":{"tags":["apps"],"summary":"Get user's app list.","produces":["application/json"],"parameters":[{"in":"query","name":"token","description":"Valid user's token","required":true,"type":"string"}],"responses":{"200":{"description":"Returns array of apps.","schema":{"$ref":"#/definitions/AppArray"}},"401":{"description":"Token expired / Token not valid."},"500":{"description":"An error occurred while getting app list."}}},"post":{"tags":["apps"],"summary":"Add new app.","produces":["application/json"],"consumes":["application/x-www-form-urlencoded"],"parameters":[{"in":"query","name":"token","description":"Valid user's token","required":true,"type":"string"},{"in":"formData","name":"name","description":"Name for new app.","required":true,"type":"string"},{"in":"formData","name":"entryPoint","description":"Entry point to load app.","required":true,"type":"string"},{"in":"formData","name":"port","description":"Port that app uses.","required":true,"type":"string"}],"responses":{"201":{"description":"App added successfully.","schema":{"$ref":"#/definitions/LoginObject"}},"401":{"description":"Token expired / Token not valid."},"404":{"description":"Could not find user with that ID."},"500":{"description":"An error occurred while adding app."}}}},"/apps/{appId}":{"get":{"tags":["apps"],"summary":"Get app with id from path parameter.","produces":["application/json"],"parameters":[{"in":"query","name":"token","description":"Valid user's token","required":true,"type":"string"},{"in":"path","name":"appId","description":"ID of app.","required":true,"type":"string"}],"responses":{"200":{"description":"Returns app details.","schema":{"$ref":"#/definitions/AppObject"}},"401":{"description":"App does not belong to user from token / Token expired / Token not valid."},"404":{"description":"App with that ID was not found."},"500":{"description":"An error occurred while getting app details."}}},"put":{"tags":["apps"],"summary":"Update app with id from path parameter.","produces":["application/json"],"consumes":["application/x-www-form-urlencoded"],"parameters":[{"in":"query","name":"token","description":"Valid user's token","required":true,"type":"string"},{"in":"path","name":"appId","description":"ID of app.","required":true,"type":"string"},{"in":"formData","name":"name","description":"Name for new app.","type":"string"},{"in":"formData","name":"entryPoint","description":"Entry point to load app.","type":"string"},{"in":"formData","name":"port","description":"Port that app uses.","type":"string"},{"in":"formData","name":"status","description":"App status (can be stopped/started).","type":"string"}],"responses":{"200":{"description":"Returns app new details.","schema":{"$ref":"#/definitions/AppObject"}},"401":{"description":"App does not belong to user from token / Token expired / Token not valid."},"404":{"description":"App with that ID was not found."},"500":{"description":"An error occurred while getting app details."}}},"delete":{"tags":["apps"],"summary":"Delete app with id from path parameter.","parameters":[{"in":"query","name":"token","description":"Valid user's token","required":true,"type":"string"},{"in":"path","name":"appId","description":"ID of app.","required":true,"type":"string"}],"responses":{"200":{"description":"App has been deleted."},"401":{"description":"App does not belong to user from token / Token expired / Token not valid."},"404":{"description":"App with that ID was not found."},"500":{"description":"An error occurred while deleting app."}}}},"/apps/{appId}/start":{"post":{"tags":["apps"],"summary":"Start app with id from path parameter.","produces":["application/json"],"parameters":[{"in":"query","name":"token","description":"Valid user's token","required":true,"type":"string"},{"in":"path","name":"appId","description":"ID of app.","required":true,"type":"string"}],"responses":{"200":{"description":"App has been started."},"401":{"description":"App does not belong to user from token / Token expired / Token not valid."},"404":{"description":"App with that ID was not found."},"500":{"description":"An error occurred while starting app."}}}},"/apps/{appId}/stop":{"post":{"tags":["apps"],"summary":"Stop app with id from path parameter.","produces":["application/json"],"parameters":[{"in":"query","name":"token","description":"Valid user's token","required":true,"type":"string"},{"in":"path","name":"appId","description":"ID of app.","required":true,"type":"string"}],"responses":{"200":{"description":"App has been stopped."},"401":{"description":"App does not belong to user from token / Token expired / Token not valid."},"404":{"description":"App with that ID was not found."},"500":{"description":"An error occurred while starting app."}}}}},"definitions":{"UserObject":{"type":"object","required":["username","password","email"],"properties":{"_id":{"type":"string","example":"5946de802f6f160ff5fd3f71"},"username":{"type":"string","example":"alekB"},"password":{"type":"string","example":"$2a$10$wY1tB13ETLC.bmni7XQZXuMcfYu.GyafU3gOLkwrfHeP7oLA4h9Ym"},"email":{"type":"string","example":"alekb@deployhandler.com"},"apps":{"type":"array"},"createdDate":{"type":"string","format":"int32","example":"2017-06-18T20:11:44.306Z"}}},"LoginObject":{"type":"object","properties":{"message":{"type":"string","example":"Successfully logged in."},"token":{"type":"string","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyIjp7Il9pZCI6IjU5NDdkZDBlYjM4ZjdlMDc2MGQyYjIzNCIsInVzZXJuYW1lIjoiYmF0aWNhIiwicGFzc3dvcmQiOiIkMmEkMTAkRU1JSVFRc3ZFSS5uS3ozWkxHdFBBdU1XNlBKZEpYOEFOc3dvdXEwTEVSWmgxcHVMcnV2dnkiLCJlbWFpbCI6ImJhdGljYUBkZXBsb3loYW5kbGVyLmNvbSIsIl9fdiI6MCwiYXBwcyI6W10sImNyZWF0ZWREYXRlIjoiMjAxNy0wNi0xOVQxNDoxNzo1MC45MDFaIn0sImlhdCI6MTQ5Nzg4MTkxOCwiZXhwIjoxNDk3ODg5MTE4fQ.BId87RuBb12X-beajJXEfoM6jnK10_sGxV4vHCTHgH8"},"userId":{"type":"string","example":"5947dd0eb38f7e0760d2b234"}}},"AppObject":{"type":"object","required":["name","port","entryPoint"],"properties":{"_id":{"type":"string","example":"5946de802f6f160ff5fd3f71"},"name":{"type":"string","example":"eventPlanner"},"status":{"type":"string","example":"started"},"entryPoint":{"type":"string","example":"server.js"},"port":{"type":"string","example":8081},"user":{"type":"string","example":"5946de802f7f160ff2fd3j23"},"createdDate":{"type":"string","format":"int32","example":"2017-06-18T20:11:44.306Z"}}},"AppArray":{"type":"array","items":{"required":["name","port","entryPoint"],"properties":{"_id":{"type":"string","example":"5946de802f6f160ff5fd3f71"},"name":{"type":"string","example":"eventPlanner"},"status":{"type":"string","example":"started"},"entryPoint":{"type":"string","example":"server.js"},"port":{"type":"string","example":8081},"user":{"type":"string","example":"5946de802f7f160ff2fd3j23"},"createdDate":{"type":"string","format":"int32","example":"2017-06-18T20:11:44.306Z"}}}}},"host":"deployhandler.com:3000","basePath":"/api","schemes":["https","http"]}